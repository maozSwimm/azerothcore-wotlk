---
id: 4bmc7
name: doc vue test
file_version: 1.0.2
app_version: 0.9.0-1
file_blobs:
  src/server/database/Database/DatabaseLoader.cpp: cfd0d6f0f87849a780c52e25dd647383d965c2a2
---

setfiles





<br/>

this is a snippet
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/server/database/Database/DatabaseLoader.cpp
```c++
â¬œ 25     #include <mysqld_error.h>
â¬œ 26     #include <thread>
â¬œ 27     
ðŸŸ© 28     DatabaseLoader::DatabaseLoader(std::string const& logger, uint32 const defaultUpdateMask, std::string_view modulesList)
ðŸŸ© 29         : _logger(logger),
ðŸŸ© 30         _modulesList(modulesList),
ðŸŸ© 31         _autoSetup(sConfigMgr->GetOption<bool>("Updates.AutoSetup", true)),
ðŸŸ© 32         _updateFlags(sConfigMgr->GetOption<uint32>("Updates.EnableDatabases", defaultUpdateMask)) { }
ðŸŸ© 33     
â¬œ 34     template <class T>
â¬œ 35     DatabaseLoader& DatabaseLoader::AddDatabase(DatabaseWorkerPool<T>& pool, std::string const& name)
â¬œ 36     {
```

<br/>

this is a second snippet
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/server/database/Database/DatabaseLoader.cpp
```c++
â¬œ 57     
â¬œ 58             pool.SetConnectionInfo(dbString, asyncThreads, synchThreads);
â¬œ 59     
ðŸŸ© 60             if (uint32 error = pool.Open())
ðŸŸ© 61             {
ðŸŸ© 62                 // Try reconnect
ðŸŸ© 63                 if (error == CR_CONNECTION_ERROR)
ðŸŸ© 64                 {
ðŸŸ© 65                     uint8 const attempts = sConfigMgr->GetOption<uint8>("Database.Reconnect.Attempts", 20);
ðŸŸ© 66                     Seconds reconnectSeconds = Seconds(sConfigMgr->GetOption<uint8>("Database.Reconnect.Seconds", 15));
ðŸŸ© 67                     uint8 reconnectCount = 0;
ðŸŸ© 68     
ðŸŸ© 69                     while (reconnectCount < attempts)
ðŸŸ© 70                     {
ðŸŸ© 71                         LOG_WARN(_logger, "> Retrying after {} seconds", static_cast<uint32>(reconnectSeconds.count()));
ðŸŸ© 72                         std::this_thread::sleep_for(reconnectSeconds);
ðŸŸ© 73                         error = pool.Open();
ðŸŸ© 74     
ðŸŸ© 75                         if (error == CR_CONNECTION_ERROR)
ðŸŸ© 76                         {
ðŸŸ© 77                             reconnectCount++;
ðŸŸ© 78                         }
ðŸŸ© 79                         else
ðŸŸ© 80                         {
ðŸŸ© 81                             break;
ðŸŸ© 82                         }
ðŸŸ© 83                     }
ðŸŸ© 84                 }
â¬œ 85     
â¬œ 86                 // Database does not exist
â¬œ 87                 if ((error == ER_BAD_DB_ERROR) && updatesEnabledForThis && _autoSetup)
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](http://localhost:5001/repos/Z2l0aHViJTNBJTNBYXplcm90aGNvcmUtd290bGslM0ElM0FtYW96U3dpbW0=/docs/4bmc7).